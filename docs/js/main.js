const T=document.querySelector(".js-search-input"),A=document.querySelector(".js-search-button"),C=document.querySelector(".js-msg-error"),S=document.querySelector(".js-favorites"),B=document.querySelector(".js-results-section"),u="search-item-result",v="fav-item",p="remove-btn",g="reset-btn",N="#ffa600",q="#fff";let r=[],s=[];const b="./assets/images/img-not-found.png",E="https://api.tvmaze.com/search/shows?q=Neko";function O(){const e=JSON.parse(localStorage.getItem("defaultPage"));e===null?y(E):(r=e,w())}function j(){const e=JSON.parse(localStorage.getItem("favList"));e!==null&&(s=e,l())}function f(e){const t=`.${e}`;return document.querySelectorAll(t)}function m(e,t){const n=f(e);for(const o of n)o.addEventListener("click",t)}function h(e){return s.findIndex(n=>n.id===parseInt(e.id))}function R(e){return r.find(n=>n.id===parseInt(e.id))}function U(e,t,n,o,a){const c=document.createElement("img");c.setAttribute("src",o),c.setAttribute("alt",a);const d=document.createElement("p"),k=document.createTextNode(n);d.appendChild(k);const i=document.createElement("li");return i.setAttribute("class",e),i.setAttribute("id",t),i.appendChild(c),i.appendChild(d),i}function D(e,t){const n=e.id,o=e.title,a=e.image,c=e.image===b?"Serie sin imagen":`Imagen de ${o}`;return U(t,n,o,a,c)}function I(e,t,n){e.textContent="";const o=document.createElement("ul");for(const a of t){const c=D(a,n);o.appendChild(c)}e.appendChild(o)}function F(e,t){const n=document.createElement("button"),o=document.createTextNode(e);return n.setAttribute("class",t),n.appendChild(o),n}function J(e){const t=f(e);for(const n of t){const o=F("x",p);n.appendChild(o),m(p,z)}}function M(){const e=F("Eliminar todos tus favoritos",g);s.length===0?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"),S.firstElementChild.appendChild(e),m(g,H)}function L(){const e=f(u);for(const t of e)h(t)!==-1?(t.style.backgroundColor=N,t.style.color=q):(t.style.color="",t.style.backgroundColor="")}function l(){I(S,s,v),J(v),M(),L(),localStorage.setItem("favList",JSON.stringify(s))}function w(){I(B,r,u),m(u,$),L()}function x(e){const t=document.createTextNode(`Ha sucedido un error: ${e}`);C.appendChild(t)}function P(){C.textContent="";const e=T.value,t=`//api.tvmaze.com/search/shows?q=${e}`;return e===""&&x("Â¡No has buscado nada!"),t}function y(e){r=[],fetch(e).then(t=>t.json()).then(t=>{for(const n of t){let o={};o.id=n.show.id,o.title=n.show.name,o.image=n.show.image===null?b:n.show.image.medium,r.push(o)}e===E&&localStorage.setItem("defaultPage",JSON.stringify(r)),w()}).catch(t=>{x(t)})}function $(e){const t=e.currentTarget,n=R(t),o=h(t);o===-1?s.push(n):s.splice(o,1),l()}function z(e){const n=e.currentTarget.parentElement,o=h(n);s.splice(o,1),l()}function H(){s=[],l()}function Q(e){e.preventDefault(),y(P())}A.addEventListener("click",Q);O();j();
//# sourceMappingURL=main.js.map
